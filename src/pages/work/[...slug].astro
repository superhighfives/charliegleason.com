---
/**
 * Dynamic route for public case studies.
 * 
 * Loads content from apps/web/src/content/work/
 * Protected case studies are injected as separate routes by the protected-routes integration.
 */

// Get the slug from params
const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect("/404");
}

// Try to dynamically import the content component
const modules = import.meta.glob("../../content/work/*.astro");
const modulePath = `../../content/work/${slug}.astro`;

if (!modules[modulePath]) {
  return Astro.redirect("/404");
}

const module = await modules[modulePath]() as { default: astroHTML.JSX.Element };
const ContentComponent = module.default;
---

<ContentComponent />
