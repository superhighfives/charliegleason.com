---
// Theme toggle component matching the original design
// Shows two icon buttons: sun (light) and moon (dark)
---

<div class="absolute top-4 right-0 flex gap-2">
  <button
    type="button"
    class="appearance-none transition-colors group p-1 text-yellow-600 dark:text-yellow-400 hover:bg-yellow-500/20 focus-visible:bg-yellow-500/20 rounded-full outline-yellow-500 outline-offset-2 focus-visible:outline focus-visible:outline-2"
    aria-label="Toggle light mode"
    data-theme="light"
  >
    <span class="absolute duration-100 transition-opacity group-focus-visible:opacity-100 group-hover:opacity-100 opacity-0 top-0 translate-y-10 font-display text-xs whitespace-nowrap right-0 pointer-events-none">
      Toggle Light
    </span>
    <svg class="w-6 h-6 fill-current" width="24" height="24" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">
      <!-- Sun icon -->
      <path d="m29.5 44c1.3254834 0 2.4100387 1.0315359 2.4946823 2.3356243l.0053177.1643757v3c0 1.3807119-1.1192881 2.5-2.5 2.5-1.3254834 0-2.4100387-1.0315359-2.4946823-2.3356243l-.0053177-.1643757v-3c0-1.3807119 1.1192881-2.5 2.5-2.5zm13.1685909-4.1523159.1199913.112471 2.1213204 2.1213204c.9763107.9763107.9763107 2.5592231 0 3.5355339-.9372583.9372583-2.4335608.9747486-3.4155426.112471l-.1199913-.112471-2.1213204-2.1213204c-.9763107-.9763107-.9763107-2.5592232 0-3.5355339.9372583-.9372583 2.4335608-.9747486 3.4155426-.112471zm-23.9216392.112471c.9372583.9372583.9747486 2.4335608.112471 3.4155426l-.112471.1199913-2.1213204 2.1213204c-.9763107.9763107-2.5592231.9763107-3.5355339 0-.9372583-.9372583-.9747486-2.4335608-.112471-3.4155426l.112471-.1199913 2.1213204-2.1213204c.9763107-.9763107 2.5592231-.9763107 3.5355339 0zm10.2530483-22.9601551c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 6c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6-2.6862915-6-6-6zm20.5 4c1.3807119 0 2.5 1.1192881 2.5 2.5 0 1.3254834-1.0315359 2.4100387-2.3356243 2.4946823l-.1643757.0053177h-3c-1.3807119 0-2.5-1.1192881-2.5-2.5 0-1.3254834 1.0315359-2.4100387 2.3356243-2.4946823l.1643757-.0053177zm-38 0c1.3807119 0 2.5 1.1192881 2.5 2.5 0 1.3254834-1.0315359 2.4100387-2.3356243 2.4946823l-.1643757.0053177h-3c-1.38071187 0-2.5-1.1192881-2.5-2.5 0-1.3254834 1.03153594-2.4100387 2.33562431-2.4946823l.16437569-.0053177zm4.2985332-14.0223736.1199913.112471 2.1213204 2.1213204c.9763107.9763107.9763107 2.5592231 0 3.5355339-.9372583.9372583-2.4335608.9747486-3.4155426.112471l-.1199913-.112471-2.1213204-2.1213204c-.9763107-.9763107-.9763107-2.5592231 0-3.5355339.9372583-.9372583 2.4335608-.9747486 3.4155426-.112471zm29.8184762.112471c.9372583.9372583.9747486 2.4335608.112471 3.4155426l-.112471.1199913-2.1213204 2.1213204c-.9763107.9763107-2.5592232.9763107-3.5355339 0-.9372583-.9372583-.9747486-2.4335608-.112471-3.4155426l.112471-.1199913 2.1213204-2.1213204c.9763107-.9763107 2.5592232-.9763107 3.5355339 0zm-14.9092477-5.112471c1.3254834 0 2.4100387 1.03153594 2.4946823 2.33562431l.0053177.16437569v3c0 1.3807119-1.1192881 2.5-2.5 2.5-1.3254834 0-2.4100387-1.0315359-2.4946823-2.3356243l-.0053177-.1643757v-3c0-1.38071187 1.1192881-2.5 2.5-2.5z" />
    </svg>
  </button>
  <button
    type="button"
    class="appearance-none transition-colors group p-1 text-yellow-600 dark:text-yellow-400 hover:bg-yellow-500/20 focus-visible:bg-yellow-500/20 rounded-full outline-yellow-500 outline-offset-2 focus-visible:outline focus-visible:outline-2"
    aria-label="Toggle dark mode"
    data-theme="dark"
  >
    <span class="absolute duration-100 transition-opacity group-focus-visible:opacity-100 group-hover:opacity-100 opacity-0 top-0 translate-y-10 font-display text-xs whitespace-nowrap right-0 pointer-events-none">
      Toggle Dark
    </span>
    <svg class="w-6 h-6 fill-current" width="24" height="24" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">
      <!-- Moon icon -->
      <path d="m38.6077247 49.9032927-.1062787.048591c-.0449152.0204014-.0899076.0406626-.1349766.0607831-.0720889.0321925-.1447382.0641746-.2175833.0957907-.0503509.0218475-.1010061.0436165-.1517549.0652083-.0572468.0243607-.1142552.0483417-.1713799.072099-.0636908.0264852-.1278556.0528302-.1921651.0788927-.0044126.0017915-.0084338.0034198-.0124556.0050469l-.3336843.1319591c-.2038518.0787713-.4091076.154722-.6157195.227804-.0265565.0093927-.052926.0186652-.0793174.027891-.0791096.0276566-.1586902.0549849-.2384667.0818875-.0439802.0148299-.0879665.029514-.1320118.0440685-.0907039.0299741-.1816609.0593987-.2728639.0882701-.0181407.0057408-.0361403.0114141-.0541495.0170658-.081362.025536-.1630794.0506787-.2449895.075377-.0667157.0201143-.1334459.0399027-.200302.0593957-.1863674.0543445-.3741269.106501-.5628364.1563194-.2546003.0672038-.5103322.130018-.7677046.1885158-.0263469.0059902-.0526657.0119231-.0790015.0178109-.1018011.0227574-.2039081.0448526-.3062651.0662674-.0514528.010766-.1027843.0213211-.1541779.0317049-.0635734.0128432-.1273272.0254424-.191175.0377775-.0708416.013688-.1418637.0270612-.2130003.0401072-.0680131.0124712-.1359472.0246127-.2039839.0364552-.0621644.0108218-.1244777.0214032-.1868758.0317334-.0753732.0124777-.1510046.0246109-.2267584.0363744-.0474904.0073759-.0951654.0146258-.1428882.0217291-.2708405.0403086-.5428909.0758589-.8163927.1066127-.0195192.0021954-.0391375.0043759-.0587633.0065318-.1071721.0117718-.2144713.0227987-.3219865.0330855-.0714011.0068324-.1431278.013358-.2149489.0195535-.0582083.0050205-.1162821.009809-.1744167.0143814-.0583329.004588-.116683.008955-.1750935.013104-.0993365.0070564-.1989793.0134898-.298793.0192867-.0309699.0017991-.0622834.0035546-.0936136.0052474-.1038422.0056091-.2075279.0105156-.3113911.0147334-.0391001.0015882-.078481.003088-.1178872.0044885-.1007627.0035801-.2014019.0065055-.3022013.0087824-.0403105.0009107-.0807085.0017187-.121132.0024225-.1357965.0023644-.2719291.0035519-.4083391.0035519-12.702549 0-23-10.297451-23-23 0-10.1058498 6.51476-18.7002364 15.5733746-21.77725816 1.0587025-.35975994 2.1648671.48116776 2.1648671 1.60169886 0 .3167498-.09126.6264774-.2636959.8912272-1.4018232 2.1536792-2.2238458 4.7313514-2.2238458 7.5352824 0 7.7319865 6.2680135 14 14 14 2.80396 0 5.3816032-.8220226 7.5352824-2.2238458.2647498-.1724959.5744774-.2636959.8912272-.2636959 1.1205311 0 1.9614588 1.1061646 1.6016989 2.1648671z" />
    </svg>
  </button>
</div>

<script>
  // Handle theme toggle clicks
  document.querySelectorAll('[data-theme]').forEach((button) => {
    button.addEventListener('click', async (e) => {
      const target = e.currentTarget as HTMLButtonElement;
      const theme = target.dataset.theme as 'light' | 'dark';
      
      // Update DOM immediately
      const html = document.documentElement;
      html.classList.remove('light', 'dark');
      html.classList.add(theme);
      html.dataset.themePreference = theme;
      
      // Persist to cookie via API
      await fetch('/api/theme', {
        method: 'POST',
        body: JSON.stringify({ theme }),
        headers: { 'Content-Type': 'application/json' },
      });
    });
  });
</script>
