---
import Icon from './Icon.astro';

interface Props {
  type?: 'default' | 'text';
  size?: 'default' | 'large';
  padding?: 'default' | 'large';
  class?: string;
  background?: boolean;
  icon?: 'back' | 'forward';
  href?: string;
}

const {
  type = 'default',
  size = 'default',
  padding = 'default',
  class: className = '',
  background = true,
  icon,
  href,
} = Astro.props;

const textClasses = `
  transition-colors outline-2 outline-offset-2 rounded-sm border-b border-neutral-900/25 dark:border-neutral-100/25 mx-0.5
  hover:text-yellow-600 dark:hover:text-yellow-400 hover:border-current dark:hover:border-current
  focus:text-yellow-600 dark:focus:text-yellow-400 focus:border-current dark:focus:border-current
  active:text-yellow-600 dark:active:text-yellow-400 active:border-current dark:active:border-current
  focus-visible:outline focus-visible:outline-yellow-600 focus-visible:dark:outline-yellow-400
  truncate
`;

const defaultClasses = `
  font-display bg-gradient-to-r bg-[length:100%_0.1em] bg-bottom bg-no-repeat box-decoration-clone px-1 outline-2 outline-offset-2 outline-yellow-500 grayscale
  
  bg-neutral-100 from-yellow-500 to-yellow-600 [text-shadow:0_0.125em_0_theme('colors.neutral.100')]
  dark:bg-neutral-900 dark:from-yellow-600 dark:to-yellow-500 dark:[text-shadow:0_0.125em_0_theme('colors.neutral.900')]
  
  hover:grayscale-0 hover:bg-[length:100%_2px] hover:text-yellow-900 hover:bg-yellow-300 hover:[text-shadow:0_0.125em_0_theme('colors.yellow.300')] 
  focus:grayscale-0 focus:bg-[length:100%_2px] focus:text-yellow-900 focus:bg-yellow-300 focus:[text-shadow:0_0.125em_0_theme('colors.yellow.300')] 
  
  dark:hover:text-yellow-400 dark:hover:bg-yellow-900 dark:hover:[text-shadow:0_0.125em_0_theme('colors.yellow.900')]
  dark:focus:text-yellow-400 dark:focus:bg-yellow-900 dark:focus:[text-shadow:0_0.125em_0_theme('colors.yellow.900')]
  
  active:outline active:outline-yellow-300 dark:active:outline-yellow-800 active:grayscale-0
  focus-visible:outline
`;

const sizeClasses = size === 'large' ? 'sm:text-md md:text-lg' : '';
const backgroundClasses = !background ? 'bg-none bg-white dark:bg-neutral-900 rounded-md' : 'rounded-sm';
const paddingClasses = padding === 'large' ? 'px-2 py-1 -my-0.5' : '';
---

{type === 'text' ? (
  <a
    href={href}
    class:list={[textClasses, className]}
  >
    <slot />
  </a>
) : (
  <a
    href={href}
    class:list={[defaultClasses, sizeClasses, backgroundClasses, paddingClasses, className]}
  >
    {icon && (
      <Icon class="w-4 mx-auto inline mr-2" name={icon} />
    )}
    <slot />
  </a>
)}
